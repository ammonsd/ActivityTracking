# Application Properties for Local Development
# OVERRIDES ONLY - All other settings inherited from application.properties
#
# Activate with: SPRING_PROFILES_ACTIVE=local

# ===================================================================
# LOCAL DEVELOPMENT OVERRIDES
# ===================================================================

# Server Configuration - Use standard port
server.port=8080

# Security Configuration - ENABLED for Angular integration (was disabled for local dev)
# spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration,org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration

# JWT Configuration for Local Development
jwt.secret=local-development-jwt-secret-key-do-not-use-in-production-minimum-32-bytes
jwt.expiration=86400000
jwt.refresh.expiration=604800000

# Admin Configuration for Local Development
app.admin.initial-password=LocalAdmin123!

# Error handling - Show full errors for debugging
server.error.include-message=always
server.error.include-binding-errors=always
server.error.include-stacktrace=on_param

# Database Configuration - Allow default username for local dev
spring.datasource.username=${DB_USERNAME:postgres}

# Hibernate Configuration - Show SQL for debugging
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
# Note: NOT setting hibernate.jdbc.time_zone because we handle UTC in Java code with LocalDateTime.now(ZoneOffset.UTC)

# Logging Configuration - More verbose for development
logging.level.com.ammons.taskactivity=DEBUG
logging.level.com.ammons.taskactivity.service.UserDetailsServiceImpl=TRACE
logging.level.org.springframework.web=DEBUG
logging.level.org.springframework.security=TRACE
logging.level.org.springframework.security.web=TRACE
logging.level.org.springframework.security.authentication=TRACE
logging.level.org.springframework.security.authentication.dao=TRACE
logging.level.org.hibernate.SQL=ERROR
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# File Logging - Save deployment logs to C:\Logs for debugging
# Note: Make sure C:\Logs directory exists or Spring Boot will fail to start
logging.file.name=C:/Logs/taskactivity-local.log
logging.logback.rollingpolicy.max-file-size=10MB
logging.logback.rollingpolicy.max-history=30
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n

# Storage Configuration
storage.type=local
storage.local.path=c:/Task Activity/Receipts

# File Upload Limits
spring.servlet.multipart.max-file-size=5MB
spring.servlet.multipart.max-request-size=5MB

# Allowed file types
storage.allowed-types=image/jpeg,image/png,image/jpg,application/pdf

# Email Configuration - Override for local testing
app.mail.expense-approvers=deanammons@gmail.com

# CORS Configuration - Development origins
cors.allowed-origins=http://localhost:4200,http://localhost:3000,http://localhost:8080

# Session Configuration - HTTP (no SSL in local dev)
server.servlet.session.cookie.secure=false
server.servlet.session.cookie.domain=

# OpenAPI/Swagger Configuration - ENABLED for local development
springdoc.swagger-ui.enabled=true
springdoc.api-docs.enabled=true
